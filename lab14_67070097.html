<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style2.css">
</head>
<body>
    <div class="title">
        <h1 id="title" onclick="goProfile()">Prapatpong Dawpradabwong 67070097</h1>
    </div>
    <div class="avatar">
        <div id="profile"style="height: 183px; width: 183px; background-image: url(https://cdn.britannica.com/06/158006-050-71BFAE79/Firefly-leaf.jpg); border-radius: 100%; background-size: cover; position: relative; background-position: center;">
            <div style="height: 30px; width: 30px; background-color: red; border-radius: 100%; display: flex; justify-content: center; align-items: center; position: absolute; bottom: 0; right: 12px;"><p>1</p></div>
        </div>
    </div>
    <div class="user">
        <label for="">Set Username :</label>
        <input type="text" placeholder="Enter Ur Username" id="username_input"><button onclick="setUsername()">Set</button>
    </div>
    <div class="profile">
        <label for="">Set Profile Pic :</label>
        <input type="text" placeholder="Enter Ur Profile Img Link" id="profile_input"><button onclick="setimage()">Set</button>
    </div>
    <div class="phone">
        <h2>Phone number list</h2>
    </div>
    <div class="phone_input">
        <input type="text" placeholder="Name" id="Name_input">
        <input type="text" placeholder="Tel" id="Tel_input">
        <button onclick="addTable()">ADD</button>
        <button onclick="saveCSV()">EXPORT</button>
    </div>
    <div class = "parent" id="parent">
        <table id="phoneTable">
            <tr>
              <th>No.</th>
              <th>Name</th>
              <th>Phonenumber</th>
            </tr>
          </table>
    </div>

    <script>
        const username = document.getElementById("title");
        const profile = document.getElementById("profile");
        let count = 0;
        let table = document.getElementById("phoneTable");
        let phonenumber = [];

        function setUsername(){
            username.textContent = username_input.value;
            console.log(userinput.value);
        };
        function setimage(){
            profile.style.backgroundImage = "url("+ profile_input.value+ ")";
            console.log(profile_input.input)
        };
        function addTable() {
            count += 1;
            const row = document.createElement("tr");
            const cellNo = document.createElement("td");
            const cellName = document.createElement("td");
            const cellTel = document.createElement("td");

            cellNo.textContent = count;
            cellName.textContent = Name_input.value;
            cellTel.textContent = Tel_input.value;

            row.appendChild(cellNo);
            row.appendChild(cellName);
            row.appendChild(cellTel);

            table.appendChild(row);

            let arr = [];
            arr.push(count);
            arr.push(Name_input.value);
            arr.push(Tel_input.value);

            phonenumber.push(arr);

            Name_input.value = "";
            Tel_input.value = "";
        };
        function saveCSV() {
            const csvContent = phonenumber.map(row => row.join(",")).join("\n"); // Convert array to CSV string
            const blob = new Blob([csvContent], { type: "text/csv;charset=utf-8;" });
            const link = document.createElement("a");
            const url = URL.createObjectURL(blob);
            link.setAttribute("href", url);
            link.setAttribute("download", "data.csv");
            link.style.visibility = "hidden";
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        };
    </script>
</body>
</html>